<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Request Management</title>
  <link rel="stylesheet" href="adminFormat.css" />
</head>
<body class="admin">
  <nav class="navbar">
    <div class="nav-left">
      <a href="adminHome.html" class="nav-item">HOME</a>
      <a href="request_management.html" class="nav-item active">REQUEST<br>MANAGEMENT</a>
      <a href="scheduling.html" class="nav-item">SCHEDULING</a>
    </div>

    <div class="nav-center">
      <img src="image/logo.png" class="logo" alt="Logo" />
    </div>

    <div class="nav-right">
      <a href="fireExtinguisher_information.html" class="nav-item">FIRE EXTINGUISHER<br>INFORMATION</a>
      <a href="#" class="nav-item">INFORMATION<br>MANAGEMENT</a>
    </div>
  </nav>

  <div class="order-container">
    <h2 class="title">CREATE ORDER</h2>
    <p class="note">Click “CREATE” once you've finished creating the order based on the customer request below.</p>
    
    <div class="form-section">
      <h2>ORDER DETAILS</h2>
      <form class="order-form" id="orderForm" onsubmit="handleCreate(event)">
        <div class="row">
          <div class="form-group">
            <label for="orderId">Order ID</label>
            <input type="text" id="orderId" required />
          </div>
          <div class="form-group">
            <label for="customerId">Customer ID</label>
            <input type="text" id="customerId" required />
          </div>
        </div>

        <label for="quantity">Quantity of Fire Extinguisher</label>
        <input type="number" id="quantity" min="0" value="0">

        <div id="serialContainer">
          <label>Serial No.:</label>
          <select class="serialDropdown">
            <option value="">None</option>
          </select>
        </div>

        <label for="notes">Additional Notes</label>
        <textarea id="notes" rows="4"></textarea>

        <button type="submit">CREATE</button>
      </form>
    </div>
  </div>

  <hr />
  <div class="request-section">
    <h2 class="title">CUSTOMER REQUEST</h2>
    <p class="note">Click "DONE" once you've finished creating the order and schedule.</p>

    <div class="request-card" id="requestCard" style="display: none;">
      <p><strong>Customer ID: zarraminah05</strong></p>
      <p><strong>Service ID: MNT981</strong></p>
      <p>Premise ID: HME520</p>
      <p>Quantity of Fire Extinguisher: 2</p>
      <p>Location: DT 698, Jalan Nuri 65, Taman Belimbing Nuri, 76100 Durian Tunggal, Melaka</p>
      <p>Preferred Date: 26/06/2025</p>
      <p>Additional Notes: Two ABC Extinguishers.</p>
      <button class="done-btn" onclick="handleDone()">DONE</button>
    </div>
  </div>

  <p class="note">*WARNING: Once the “DONE” button is clicked, the customer request details will be removed from this page as a mark that you’ve created an order and schedule.</p>

  <script>
    const quantityInput = document.getElementById("quantity");
    const serialContainer = document.getElementById("serialContainer");

    function createSerialDropdowns(count) {
      serialContainer.innerHTML = `<label>Serial No.:</label>`;
      for (let i = 0; i < count; i++) {
        const select = document.createElement("select");
        select.className = "serialDropdown";
        select.required = true;
        select.innerHTML = `<option value="">None</option>`;
        serialContainer.appendChild(select);
      }
    }

    quantityInput.addEventListener("input", () => {
      const qty = parseInt(quantityInput.value);
      if (!isNaN(qty) && qty > 0) {
        createSerialDropdowns(qty);
      }
    });

    document.addEventListener("DOMContentLoaded", () => {
      createSerialDropdowns(parseInt(quantityInput.value));

      const hasRequest = true;
      if (hasRequest) {
        document.getElementById("requestCard").style.display = "block";
      }
    });

    function handleCreate(event) {
      event.preventDefault();

      const orderId = document.getElementById("orderId").value.trim();
      const customerId = document.getElementById("customerId").value.trim();

      if (orderId && customerId) {
        alert("Order created successfully. The customer can see their order details.");
      } 
    }

    function handleDone() {
      const confirmDone = confirm("Are you done creating an order and schedule for this request?");
      if (confirmDone) {
        document.getElementById("requestCard").style.display = "none";
        alert("Customer request deleted successfully.");
      }
    }
  </script>
</body>
</html>
